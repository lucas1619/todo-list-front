{"remainingRequest":"/home/lucas/Desktop/test/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/lucas/Desktop/test/src/views/apps/chat/ChatLog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/lucas/Desktop/test/src/views/apps/chat/ChatLog.vue","mtime":1611055082000},{"path":"/home/lucas/Desktop/test/node_modules/cache-loader/dist/cjs.js","mtime":1646760974730},{"path":"/home/lucas/Desktop/test/node_modules/babel-loader/lib/index.js","mtime":1646760975446},{"path":"/home/lucas/Desktop/test/node_modules/cache-loader/dist/cjs.js","mtime":1646760974730},{"path":"/home/lucas/Desktop/test/node_modules/vue-loader/lib/index.js","mtime":1646760975666}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNvbXB1dGVkIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknCmltcG9ydCB7IEJBdmF0YXIgfSBmcm9tICdib290c3RyYXAtdnVlJwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEJBdmF0YXIsCiAgfSwKICBwcm9wczogewogICAgY2hhdERhdGE6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgIH0sCiAgICBwcm9maWxlVXNlckF2YXRhcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgfSwKICB9LAogIHNldHVwKHByb3BzKSB7CiAgICBjb25zdCBmb3JtYXR0ZWRDaGF0RGF0YSA9IGNvbXB1dGVkKCgpID0+IHsKICAgICAgY29uc3QgY29udGFjdCA9IHsKICAgICAgICBpZDogcHJvcHMuY2hhdERhdGEuY29udGFjdC5pZCwKICAgICAgICBhdmF0YXI6IHByb3BzLmNoYXREYXRhLmNvbnRhY3QuYXZhdGFyLAogICAgICB9CgogICAgICBsZXQgY2hhdExvZyA9IFtdCiAgICAgIGlmIChwcm9wcy5jaGF0RGF0YS5jaGF0KSB7CiAgICAgICAgY2hhdExvZyA9IHByb3BzLmNoYXREYXRhLmNoYXQuY2hhdAogICAgICB9CgogICAgICBjb25zdCBmb3JtYXR0ZWRDaGF0TG9nID0gW10KICAgICAgbGV0IGNoYXRNZXNzYWdlU2VuZGVySWQgPSBjaGF0TG9nWzBdID8gY2hhdExvZ1swXS5zZW5kZXJJZCA6IHVuZGVmaW5lZAogICAgICBsZXQgbXNnR3JvdXAgPSB7CiAgICAgICAgc2VuZGVyOiBjaGF0TWVzc2FnZVNlbmRlcklkLAogICAgICAgIG1lc3NhZ2VzOiBbXSwKICAgICAgfQoKICAgICAgY2hhdExvZy5mb3JFYWNoKChtc2csIGluZGV4KSA9PiB7CiAgICAgICAgaWYgKGNoYXRNZXNzYWdlU2VuZGVySWQgPT09IG1zZy5zZW5kZXJJZCkgewogICAgICAgICAgbXNnR3JvdXAubWVzc2FnZXMucHVzaCh7CiAgICAgICAgICAgIG1zZzogbXNnLm1lc3NhZ2UsCiAgICAgICAgICAgIHRpbWU6IG1zZy50aW1lLAogICAgICAgICAgfSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2hhdE1lc3NhZ2VTZW5kZXJJZCA9IG1zZy5zZW5kZXJJZAogICAgICAgICAgZm9ybWF0dGVkQ2hhdExvZy5wdXNoKG1zZ0dyb3VwKQogICAgICAgICAgbXNnR3JvdXAgPSB7CiAgICAgICAgICAgIHNlbmRlcklkOiBtc2cuc2VuZGVySWQsCiAgICAgICAgICAgIG1lc3NhZ2VzOiBbewogICAgICAgICAgICAgIG1zZzogbXNnLm1lc3NhZ2UsCiAgICAgICAgICAgICAgdGltZTogbXNnLnRpbWUsCiAgICAgICAgICAgIH1dLAogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoaW5kZXggPT09IGNoYXRMb2cubGVuZ3RoIC0gMSkgZm9ybWF0dGVkQ2hhdExvZy5wdXNoKG1zZ0dyb3VwKQogICAgICB9KQoKICAgICAgcmV0dXJuIHsKICAgICAgICBmb3JtYXR0ZWRDaGF0TG9nLAogICAgICAgIGNvbnRhY3QsCiAgICAgICAgcHJvZmlsZVVzZXJBdmF0YXI6IHByb3BzLnByb2ZpbGVVc2VyQXZhdGFyLAogICAgICB9CiAgICB9KQoKICAgIHJldHVybiB7CiAgICAgIGZvcm1hdHRlZENoYXREYXRhLAogICAgfQogIH0sCn0K"},{"version":3,"sources":["ChatLog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"ChatLog.vue","sourceRoot":"src/views/apps/chat","sourcesContent":["<template>\n  <div class=\"chats\">\n    <div\n      v-for=\"(msgGrp, index) in formattedChatData.formattedChatLog\"\n      :key=\"msgGrp.senderId+String(index)\"\n      class=\"chat\"\n      :class=\"{'chat-left': msgGrp.senderId === formattedChatData.contact.id}\"\n    >\n      <div class=\"chat-avatar\">\n        <b-avatar\n          size=\"36\"\n          class=\"avatar-border-2 box-shadow-1\"\n          variant=\"transparent\"\n          :src=\"msgGrp.senderId === formattedChatData.contact.id ? formattedChatData.contact.avatar : profileUserAvatar\"\n        />\n      </div>\n      <div class=\"chat-body\">\n        <div\n          v-for=\"msgData in msgGrp.messages\"\n          :key=\"msgData.time\"\n          class=\"chat-content\"\n        >\n          <p>{{ msgData.msg }}</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed } from '@vue/composition-api'\nimport { BAvatar } from 'bootstrap-vue'\n\nexport default {\n  components: {\n    BAvatar,\n  },\n  props: {\n    chatData: {\n      type: Object,\n      required: true,\n    },\n    profileUserAvatar: {\n      type: String,\n      required: true,\n    },\n  },\n  setup(props) {\n    const formattedChatData = computed(() => {\n      const contact = {\n        id: props.chatData.contact.id,\n        avatar: props.chatData.contact.avatar,\n      }\n\n      let chatLog = []\n      if (props.chatData.chat) {\n        chatLog = props.chatData.chat.chat\n      }\n\n      const formattedChatLog = []\n      let chatMessageSenderId = chatLog[0] ? chatLog[0].senderId : undefined\n      let msgGroup = {\n        sender: chatMessageSenderId,\n        messages: [],\n      }\n\n      chatLog.forEach((msg, index) => {\n        if (chatMessageSenderId === msg.senderId) {\n          msgGroup.messages.push({\n            msg: msg.message,\n            time: msg.time,\n          })\n        } else {\n          chatMessageSenderId = msg.senderId\n          formattedChatLog.push(msgGroup)\n          msgGroup = {\n            senderId: msg.senderId,\n            messages: [{\n              msg: msg.message,\n              time: msg.time,\n            }],\n          }\n        }\n        if (index === chatLog.length - 1) formattedChatLog.push(msgGroup)\n      })\n\n      return {\n        formattedChatLog,\n        contact,\n        profileUserAvatar: props.profileUserAvatar,\n      }\n    })\n\n    return {\n      formattedChatData,\n    }\n  },\n}\n</script>\n\n<style>\n\n</style>\n"]}]}