{"remainingRequest":"/home/lucas/Desktop/test/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/lucas/Desktop/test/src/views/forms/form-element/autosuggest/AutoSuggestAjax.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/lucas/Desktop/test/src/views/forms/form-element/autosuggest/AutoSuggestAjax.vue","mtime":1611055082000},{"path":"/home/lucas/Desktop/test/node_modules/cache-loader/dist/cjs.js","mtime":1646760974730},{"path":"/home/lucas/Desktop/test/node_modules/babel-loader/lib/index.js","mtime":1646760975446},{"path":"/home/lucas/Desktop/test/node_modules/cache-loader/dist/cjs.js","mtime":1646760974730},{"path":"/home/lucas/Desktop/test/node_modules/vue-loader/lib/index.js","mtime":1646760975666}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlIHZ1ZS9uby11bnVzZWQtY29tcG9uZW50cyAqLwovKiBlc2xpbnQgbm8tdW51c2VkLWV4cHJlc3Npb25zOiBbImVycm9yIiwgeyAiYWxsb3dTaG9ydENpcmN1aXQiOiB0cnVlIH1dICovCmltcG9ydCBCQ2FyZENvZGUgZnJvbSAnQGNvcmUvY29tcG9uZW50cy9iLWNhcmQtY29kZS9CQ2FyZENvZGUudnVlJwppbXBvcnQgeyBCQ2FyZCwgQkNhcmRUZXh0LCBCQXZhdGFyIH0gZnJvbSAnYm9vdHN0cmFwLXZ1ZScKaW1wb3J0IHsgVnVlQXV0b3N1Z2dlc3QgfSBmcm9tICd2dWUtYXV0b3N1Z2dlc3QnCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IHsgY29kZUFqYXggfSBmcm9tICcuL2NvZGUnCgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgVnVlQXV0b3N1Z2dlc3QsCiAgICBCQ2FyZENvZGUsCiAgICBCQ2FyZCwKICAgIEJDYXJkVGV4dCwKICAgIEJBdmF0YXIsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY29kZUFqYXgsCiAgICAgIHF1ZXJ5OiAnJywKICAgICAgcmVzdWx0czogW10sCiAgICAgIHRpbWVvdXQ6IG51bGwsCiAgICAgIHNlbGVjdGVkOiBudWxsLAogICAgICBkZWJvdW5jZU1pbGxpc2Vjb25kczogMjUwLAogICAgICB1c2Vyc1VybDogJ2h0dHBzOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS91c2VycycsCiAgICAgIHBob3Rvc1VybDogJ2h0dHBzOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS9waG90b3MnLAogICAgICBpbnB1dFByb3BzOiB7CiAgICAgICAgaWQ6ICdhdXRvc3VnZ2VzdF9faW5wdXRfYWpheCcsCiAgICAgICAgcGxhY2Vob2xkZXI6ICdEbyB5b3UgZmVlbCBsdWNreSwgcHVuaz8nLAogICAgICAgIGNsYXNzOiAnZm9ybS1jb250cm9sJywKICAgICAgICBuYW1lOiAnYWpheCcsCiAgICAgIH0sCiAgICAgIHN1Z2dlc3Rpb25zOiBbXSwKICAgICAgc2VjdGlvbkNvbmZpZ3M6IHsKICAgICAgICBkZXN0aW5hdGlvbnM6IHsKICAgICAgICAgIGxpbWl0OiA2LAogICAgICAgICAgbGFiZWw6ICdEZXN0aW5hdGlvbicsCiAgICAgICAgICBvblNlbGVjdGVkOiBzZWxlY3RlZCA9PiB7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBzZWxlY3RlZC5pdGVtCiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgICAgaG90ZWxzOiB7CiAgICAgICAgICBsaW1pdDogNiwKICAgICAgICAgIGxhYmVsOiAnSG90ZWxzJywKICAgICAgICAgIG9uU2VsZWN0ZWQ6IHNlbGVjdGVkID0+IHsKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZCA9IHNlbGVjdGVkLml0ZW0KICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgfSwKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGZldGNoUmVzdWx0cygpIHsKICAgICAgY29uc3QgeyBxdWVyeSB9ID0gdGhpcwoKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCkKICAgICAgdGhpcy50aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgY29uc3QgcGhvdG9zUHJvbWlzZSA9IGF4aW9zLmdldCh0aGlzLnBob3Rvc1VybCkKICAgICAgICBjb25zdCB1c2Vyc1Byb21pc2UgPSBheGlvcy5nZXQodGhpcy51c2Vyc1VybCkKCiAgICAgICAgUHJvbWlzZS5hbGwoW3Bob3Rvc1Byb21pc2UsIHVzZXJzUHJvbWlzZV0pLnRoZW4odmFsdWVzID0+IHsKICAgICAgICAgIHRoaXMuc3VnZ2VzdGlvbnMgPSBbXQogICAgICAgICAgdGhpcy5zZWxlY3RlZCA9IG51bGwKCiAgICAgICAgICBjb25zdCBwaG90b3MgPSB0aGlzLmZpbHRlclJlc3VsdHModmFsdWVzWzBdLmRhdGEsIHF1ZXJ5LCAndGl0bGUnKQogICAgICAgICAgY29uc3QgdXNlcnMgPSB0aGlzLmZpbHRlclJlc3VsdHModmFsdWVzWzFdLmRhdGEsIHF1ZXJ5LCAnbmFtZScpCiAgICAgICAgICB1c2Vycy5sZW5ndGggJiYgdGhpcy5zdWdnZXN0aW9ucy5wdXNoKHsgbmFtZTogJ2Rlc3RpbmF0aW9ucycsIGRhdGE6IHVzZXJzIH0pCiAgICAgICAgICBwaG90b3MubGVuZ3RoICYmIHRoaXMuc3VnZ2VzdGlvbnMucHVzaCh7IG5hbWU6ICdob3RlbHMnLCBkYXRhOiBwaG90b3MgfSkKICAgICAgICB9KQogICAgICB9LCB0aGlzLmRlYm91bmNlTWlsbGlzZWNvbmRzKQogICAgfSwKICAgIGZpbHRlclJlc3VsdHMoZGF0YSwgdGV4dCwgZmllbGQpIHsKICAgICAgcmV0dXJuIGRhdGEuZmlsdGVyKGl0ZW0gPT4gewogICAgICAgIGlmIChpdGVtW2ZpZWxkXS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodGV4dC50b0xvd2VyQ2FzZSgpKSA+IC0xKSB7CiAgICAgICAgICByZXR1cm4gaXRlbVtmaWVsZF0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0pLnNvcnQoKQogICAgfSwKICAgIHJlbmRlclN1Z2dlc3Rpb24oc3VnZ2VzdGlvbikgewogICAgICBpZiAoc3VnZ2VzdGlvbi5uYW1lID09PSAnaG90ZWxzJykgewogICAgICAgIGNvbnN0IGltYWdlID0gc3VnZ2VzdGlvbi5pdGVtCiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIDxkaXYgY2xhc3M9ImQtZmxleCI+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGItYXZhdGFyIHNyYz17aW1hZ2UudGh1bWJuYWlsVXJsfSBjbGFzcz0ibXItNTAiPjwvYi1hdmF0YXI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxzcGFuPntpbWFnZS50aXRsZX08L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgKQogICAgICB9CiAgICAgIHJldHVybiBzdWdnZXN0aW9uLml0ZW0ubmFtZQogICAgfSwKICAgIGdldFN1Z2dlc3Rpb25WYWx1ZShzdWdnZXN0aW9uKSB7CiAgICAgIGNvbnN0IHsgbmFtZSwgaXRlbSB9ID0gc3VnZ2VzdGlvbgogICAgICByZXR1cm4gbmFtZSA9PT0gJ2hvdGVscycgPyBpdGVtLnRpdGxlIDogaXRlbS5uYW1lCiAgICB9LAogIH0sCn0K"},{"version":3,"sources":["AutoSuggestAjax.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AutoSuggestAjax.vue","sourceRoot":"src/views/forms/form-element/autosuggest","sourcesContent":["<template>\n  <b-card-code title=\"Ajax\">\n    <vue-autosuggest\n      ref=\"autocomplete\"\n      v-model=\"query\"\n      :suggestions=\"suggestions\"\n      :input-props=\"inputProps\"\n      :section-configs=\"sectionConfigs\"\n      :render-suggestion=\"renderSuggestion\"\n      :get-suggestion-value=\"getSuggestionValue\"\n      @input=\"fetchResults\"\n    />\n\n    <b-card-text class=\"mt-1\">\n      Selected element (object):\n    </b-card-text>\n    <b-card\n      class=\"border\"\n      no-body\n    >\n      <pre>{{ JSON.stringify(selected, null, 4) }}</pre>\n    </b-card>\n\n    <template #code>\n      {{ codeAjax }}\n    </template>\n  </b-card-code>\n</template>\n\n<script>\n/* eslint-disable vue/no-unused-components */\n/* eslint no-unused-expressions: [\"error\", { \"allowShortCircuit\": true }] */\nimport BCardCode from '@core/components/b-card-code/BCardCode.vue'\nimport { BCard, BCardText, BAvatar } from 'bootstrap-vue'\nimport { VueAutosuggest } from 'vue-autosuggest'\nimport axios from 'axios'\nimport { codeAjax } from './code'\n\nexport default {\n  components: {\n    VueAutosuggest,\n    BCardCode,\n    BCard,\n    BCardText,\n    BAvatar,\n  },\n  data() {\n    return {\n      codeAjax,\n      query: '',\n      results: [],\n      timeout: null,\n      selected: null,\n      debounceMilliseconds: 250,\n      usersUrl: 'https://jsonplaceholder.typicode.com/users',\n      photosUrl: 'https://jsonplaceholder.typicode.com/photos',\n      inputProps: {\n        id: 'autosuggest__input_ajax',\n        placeholder: 'Do you feel lucky, punk?',\n        class: 'form-control',\n        name: 'ajax',\n      },\n      suggestions: [],\n      sectionConfigs: {\n        destinations: {\n          limit: 6,\n          label: 'Destination',\n          onSelected: selected => {\n            this.selected = selected.item\n          },\n        },\n        hotels: {\n          limit: 6,\n          label: 'Hotels',\n          onSelected: selected => {\n            this.selected = selected.item\n          },\n        },\n      },\n    }\n  },\n  methods: {\n    fetchResults() {\n      const { query } = this\n\n      clearTimeout(this.timeout)\n      this.timeout = setTimeout(() => {\n        const photosPromise = axios.get(this.photosUrl)\n        const usersPromise = axios.get(this.usersUrl)\n\n        Promise.all([photosPromise, usersPromise]).then(values => {\n          this.suggestions = []\n          this.selected = null\n\n          const photos = this.filterResults(values[0].data, query, 'title')\n          const users = this.filterResults(values[1].data, query, 'name')\n          users.length && this.suggestions.push({ name: 'destinations', data: users })\n          photos.length && this.suggestions.push({ name: 'hotels', data: photos })\n        })\n      }, this.debounceMilliseconds)\n    },\n    filterResults(data, text, field) {\n      return data.filter(item => {\n        if (item[field].toLowerCase().indexOf(text.toLowerCase()) > -1) {\n          return item[field]\n        }\n        return false\n      }).sort()\n    },\n    renderSuggestion(suggestion) {\n      if (suggestion.name === 'hotels') {\n        const image = suggestion.item\n        return (\n          <div class=\"d-flex\">\n            <div>\n              <b-avatar src={image.thumbnailUrl} class=\"mr-50\"></b-avatar>\n            </div>\n            <div>\n              <span>{image.title}</span>\n            </div>\n          </div>\n        )\n      }\n      return suggestion.item.name\n    },\n    getSuggestionValue(suggestion) {\n      const { name, item } = suggestion\n      return name === 'hotels' ? item.title : item.name\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\npre{\n  min-height: 295px;\n  padding: 1.5rem;\n  margin-bottom: 0;\n  border-radius: .5rem;\n}\n</style>\n"]}]}