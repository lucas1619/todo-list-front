{"remainingRequest":"/home/lucas/Desktop/test/node_modules/babel-loader/lib/index.js!/home/lucas/Desktop/test/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/lucas/Desktop/test/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/lucas/Desktop/test/src/views/apps/chat/Chat.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/lucas/Desktop/test/src/views/apps/chat/Chat.vue","mtime":1611055082000},{"path":"/home/lucas/Desktop/test/babel.config.js","mtime":1611055082000},{"path":"/home/lucas/Desktop/test/node_modules/cache-loader/dist/cjs.js","mtime":1646760974730},{"path":"/home/lucas/Desktop/test/node_modules/babel-loader/lib/index.js","mtime":1646760975446},{"path":"/home/lucas/Desktop/test/node_modules/cache-loader/dist/cjs.js","mtime":1646760974730},{"path":"/home/lucas/Desktop/test/node_modules/vue-loader/lib/index.js","mtime":1646760975666}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvbHVjYXMvRGVza3RvcC90ZXN0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCB7IHJlZiwgb25Vbm1vdW50ZWQsIG5leHRUaWNrIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknOwppbXBvcnQgeyBCQXZhdGFyLCBCRHJvcGRvd24sIEJEcm9wZG93bkl0ZW0sIEJGb3JtLCBCSW5wdXRHcm91cCwgQkZvcm1JbnB1dCwgQkJ1dHRvbiB9IGZyb20gJ2Jvb3RzdHJhcC12dWUnOwppbXBvcnQgVnVlUGVyZmVjdFNjcm9sbGJhciBmcm9tICd2dWUtcGVyZmVjdC1zY3JvbGxiYXInOyAvLyBpbXBvcnQgeyBmb3JtYXREYXRlIH0gZnJvbSAnQGNvcmUvdXRpbHMvZmlsdGVyJwoKaW1wb3J0IHsgJHRoZW1lQnJlYWtwb2ludHMgfSBmcm9tICdAdGhlbWVDb25maWcnOwppbXBvcnQgeyB1c2VSZXNwb25zaXZlQXBwTGVmdFNpZGViYXJWaXNpYmlsaXR5IH0gZnJvbSAnQGNvcmUvY29tcC1mdW5jdGlvbnMvdWkvYXBwJzsKaW1wb3J0IENoYXRMZWZ0U2lkZWJhciBmcm9tICcuL0NoYXRMZWZ0U2lkZWJhci52dWUnOwppbXBvcnQgY2hhdFN0b3JlTW9kdWxlIGZyb20gJy4vY2hhdFN0b3JlTW9kdWxlJzsKaW1wb3J0IENoYXRBY3RpdmVDaGF0Q29udGVudERldGFpbHNTaWRlZGJhciBmcm9tICcuL0NoYXRBY3RpdmVDaGF0Q29udGVudERldGFpbHNTaWRlZGJhci52dWUnOwppbXBvcnQgQ2hhdExvZyBmcm9tICcuL0NoYXRMb2cudnVlJzsKaW1wb3J0IHVzZUNoYXQgZnJvbSAnLi91c2VDaGF0JzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIC8vIEJTVgogICAgQkF2YXRhcjogQkF2YXRhciwKICAgIEJEcm9wZG93bjogQkRyb3Bkb3duLAogICAgQkRyb3Bkb3duSXRlbTogQkRyb3Bkb3duSXRlbSwKICAgIEJGb3JtOiBCRm9ybSwKICAgIEJJbnB1dEdyb3VwOiBCSW5wdXRHcm91cCwKICAgIEJGb3JtSW5wdXQ6IEJGb3JtSW5wdXQsCiAgICBCQnV0dG9uOiBCQnV0dG9uLAogICAgLy8gM3JkIFBhcnR5CiAgICBWdWVQZXJmZWN0U2Nyb2xsYmFyOiBWdWVQZXJmZWN0U2Nyb2xsYmFyLAogICAgLy8gU0ZDCiAgICBDaGF0TGVmdFNpZGViYXI6IENoYXRMZWZ0U2lkZWJhciwKICAgIENoYXRBY3RpdmVDaGF0Q29udGVudERldGFpbHNTaWRlZGJhcjogQ2hhdEFjdGl2ZUNoYXRDb250ZW50RGV0YWlsc1NpZGVkYmFyLAogICAgQ2hhdExvZzogQ2hhdExvZwogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIENIQVRfQVBQX1NUT1JFX01PRFVMRV9OQU1FID0gJ2FwcC1jaGF0JzsgLy8gUmVnaXN0ZXIgbW9kdWxlCgogICAgaWYgKCFzdG9yZS5oYXNNb2R1bGUoQ0hBVF9BUFBfU1RPUkVfTU9EVUxFX05BTUUpKSBzdG9yZS5yZWdpc3Rlck1vZHVsZShDSEFUX0FQUF9TVE9SRV9NT0RVTEVfTkFNRSwgY2hhdFN0b3JlTW9kdWxlKTsgLy8gVW5SZWdpc3RlciBvbiBsZWF2ZQoKICAgIG9uVW5tb3VudGVkKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHN0b3JlLmhhc01vZHVsZShDSEFUX0FQUF9TVE9SRV9NT0RVTEVfTkFNRSkpIHN0b3JlLnVucmVnaXN0ZXJNb2R1bGUoQ0hBVF9BUFBfU1RPUkVfTU9EVUxFX05BTUUpOwogICAgfSk7CgogICAgdmFyIF91c2VDaGF0ID0gdXNlQ2hhdCgpLAogICAgICAgIHJlc29sdmVBdmF0YXJCYWRnZVZhcmlhbnQgPSBfdXNlQ2hhdC5yZXNvbHZlQXZhdGFyQmFkZ2VWYXJpYW50OyAvLyBTY3JvbGwgdG8gQm90dG9tIENoYXRMb2cKCgogICAgdmFyIHJlZkNoYXRMb2dQUyA9IHJlZihudWxsKTsKCiAgICB2YXIgc2Nyb2xsVG9Cb3R0b21JbkNoYXRMb2cgPSBmdW5jdGlvbiBzY3JvbGxUb0JvdHRvbUluQ2hhdExvZygpIHsKICAgICAgdmFyIHNjcm9sbEVsID0gcmVmQ2hhdExvZ1BTLnZhbHVlLiRlbCB8fCByZWZDaGF0TG9nUFMudmFsdWU7CiAgICAgIHNjcm9sbEVsLnNjcm9sbFRvcCA9IHNjcm9sbEVsLnNjcm9sbEhlaWdodDsKICAgIH07IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gQ2hhdHMgJiBDb250YWN0cwogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoKICAgIHZhciBjaGF0c0NvbnRhY3RzID0gcmVmKFtdKTsKICAgIHZhciBjb250YWN0cyA9IHJlZihbXSk7CgogICAgdmFyIGZldGNoQ2hhdEFuZENvbnRhY3RzID0gZnVuY3Rpb24gZmV0Y2hDaGF0QW5kQ29udGFjdHMoKSB7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCdhcHAtY2hhdC9mZXRjaENoYXRzQW5kQ29udGFjdHMnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNoYXRzQ29udGFjdHMudmFsdWUgPSByZXNwb25zZS5kYXRhLmNoYXRzQ29udGFjdHM7CiAgICAgICAgY29udGFjdHMudmFsdWUgPSByZXNwb25zZS5kYXRhLmNvbnRhY3RzOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmUKCiAgICAgICAgcHJvZmlsZVVzZXJEYXRhTWluaW1hbC52YWx1ZSA9IHJlc3BvbnNlLmRhdGEucHJvZmlsZVVzZXI7CiAgICAgIH0pOwogICAgfTsKCiAgICBmZXRjaENoYXRBbmRDb250YWN0cygpOyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIFNpbmdsZSBDaGF0CiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICB2YXIgYWN0aXZlQ2hhdCA9IHJlZih7fSk7CiAgICB2YXIgY2hhdElucHV0TWVzc2FnZSA9IHJlZignJyk7CgogICAgdmFyIG9wZW5DaGF0T2ZDb250YWN0ID0gZnVuY3Rpb24gb3BlbkNoYXRPZkNvbnRhY3QodXNlcklkKSB7CiAgICAgIC8vIFJlc2V0IHNlbmQgbWVzc2FnZSBpbnB1dCB2YWx1ZQogICAgICBjaGF0SW5wdXRNZXNzYWdlLnZhbHVlID0gJyc7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCdhcHAtY2hhdC9nZXRDaGF0JywgewogICAgICAgIHVzZXJJZDogdXNlcklkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgYWN0aXZlQ2hhdC52YWx1ZSA9IHJlc3BvbnNlLmRhdGE7IC8vIFNldCB1bnNlZW5Nc2dzIHRvIDAKCiAgICAgICAgdmFyIGNvbnRhY3QgPSBjaGF0c0NvbnRhY3RzLnZhbHVlLmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICAgIHJldHVybiBjLmlkID09PSB1c2VySWQ7CiAgICAgICAgfSk7CiAgICAgICAgaWYgKGNvbnRhY3QpIGNvbnRhY3QuY2hhdC51bnNlZW5Nc2dzID0gMDsgLy8gU2Nyb2xsIHRvIGJvdHRvbQoKICAgICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICBzY3JvbGxUb0JvdHRvbUluQ2hhdExvZygpOwogICAgICAgIH0pOwogICAgICB9KTsgLy8gaWYgU00gZGV2aWNlID0+ICBDbG9zZSBDaGF0ICYgQ29udGFjdHMgbGVmdCBzaWRlYmFyCiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZQoKICAgICAgbXFTaGFsbFNob3dMZWZ0U2lkZWJhci52YWx1ZSA9IGZhbHNlOwogICAgfTsKCiAgICB2YXIgc2VuZE1lc3NhZ2UgPSBmdW5jdGlvbiBzZW5kTWVzc2FnZSgpIHsKICAgICAgaWYgKCFjaGF0SW5wdXRNZXNzYWdlLnZhbHVlKSByZXR1cm47CiAgICAgIHZhciBwYXlsb2FkID0gewogICAgICAgIGNvbnRhY3RJZDogYWN0aXZlQ2hhdC52YWx1ZS5jb250YWN0LmlkLAogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZQogICAgICAgIHNlbmRlcklkOiBwcm9maWxlVXNlckRhdGFNaW5pbWFsLnZhbHVlLmlkLAogICAgICAgIG1lc3NhZ2U6IGNoYXRJbnB1dE1lc3NhZ2UudmFsdWUKICAgICAgfTsKICAgICAgc3RvcmUuZGlzcGF0Y2goJ2FwcC1jaGF0L3NlbmRNZXNzYWdlJywgcGF5bG9hZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgX3Jlc3BvbnNlJGRhdGEgPSByZXNwb25zZS5kYXRhLAogICAgICAgICAgICBuZXdNZXNzYWdlRGF0YSA9IF9yZXNwb25zZSRkYXRhLm5ld01lc3NhZ2VEYXRhLAogICAgICAgICAgICBjaGF0ID0gX3Jlc3BvbnNlJGRhdGEuY2hhdDsgLy8gPyBJZiBpdCdzIG5vdCB1bmRlZmluZWQgPT4gTmV3IGNoYXQgaXMgY3JlYXRlZCAoQ29udGFjdCBpcyBub3QgaW4gbGlzdCBvZiBjaGF0cykKCiAgICAgICAgaWYgKGNoYXQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgYWN0aXZlQ2hhdC52YWx1ZSA9IHsKICAgICAgICAgICAgY2hhdDogY2hhdCwKICAgICAgICAgICAgY29udGFjdDogYWN0aXZlQ2hhdC52YWx1ZS5jb250YWN0CiAgICAgICAgICB9OwogICAgICAgICAgY2hhdHNDb250YWN0cy52YWx1ZS5wdXNoKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgYWN0aXZlQ2hhdC52YWx1ZS5jb250YWN0KSwge30sIHsKICAgICAgICAgICAgY2hhdDogewogICAgICAgICAgICAgIGlkOiBjaGF0LmlkLAogICAgICAgICAgICAgIGxhc3RNZXNzYWdlOiBuZXdNZXNzYWdlRGF0YSwKICAgICAgICAgICAgICB1bnNlZW5Nc2dzOiAwCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gQWRkIG1lc3NhZ2UgdG8gbG9nCiAgICAgICAgICBhY3RpdmVDaGF0LnZhbHVlLmNoYXQuY2hhdC5wdXNoKG5ld01lc3NhZ2VEYXRhKTsKICAgICAgICB9IC8vIFJlc2V0IHNlbmQgbWVzc2FnZSBpbnB1dCB2YWx1ZQoKCiAgICAgICAgY2hhdElucHV0TWVzc2FnZS52YWx1ZSA9ICcnOyAvLyBTZXQgTGFzdCBNZXNzYWdlIGZvciBhY3RpdmUgY29udGFjdAoKICAgICAgICB2YXIgY29udGFjdCA9IGNoYXRzQ29udGFjdHMudmFsdWUuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgICAgcmV0dXJuIGMuaWQgPT09IGFjdGl2ZUNoYXQudmFsdWUuY29udGFjdC5pZDsKICAgICAgICB9KTsKICAgICAgICBjb250YWN0LmNoYXQubGFzdE1lc3NhZ2UgPSBuZXdNZXNzYWdlRGF0YTsgLy8gU2Nyb2xsIHRvIGJvdHRvbQoKICAgICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICBzY3JvbGxUb0JvdHRvbUluQ2hhdExvZygpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH07CgogICAgdmFyIHBlcmZlY3RTY3JvbGxiYXJTZXR0aW5ncyA9IHsKICAgICAgbWF4U2Nyb2xsYmFyTGVuZ3RoOiAxNTAKICAgIH07IC8vIFVzZXIgUHJvZmlsZSBTaWRlYmFyCiAgICAvLyA/IFdpbGwgY29udGFpbiBhbGwgZGV0YWlscyBvZiBwcm9maWxlIHVzZXIgKGUuZy4gc2V0dGluZ3MsIGFib3V0IGV0Yy4pCgogICAgdmFyIHByb2ZpbGVVc2VyRGF0YSA9IHJlZih7fSk7IC8vID8gV2lsbCBjb250YWluIGlkLCBuYW1lIGFuZCBhdmF0YXIgJiBzdGF0dXMKCiAgICB2YXIgcHJvZmlsZVVzZXJEYXRhTWluaW1hbCA9IHJlZih7fSk7CiAgICB2YXIgc2hhbGxTaG93VXNlclByb2ZpbGVTaWRlYmFyID0gcmVmKGZhbHNlKTsKCiAgICB2YXIgc2hvd1VzZXJQcm9maWxlU2lkZWJhciA9IGZ1bmN0aW9uIHNob3dVc2VyUHJvZmlsZVNpZGViYXIoKSB7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCdhcHAtY2hhdC9nZXRQcm9maWxlVXNlcicpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgcHJvZmlsZVVzZXJEYXRhLnZhbHVlID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBzaGFsbFNob3dVc2VyUHJvZmlsZVNpZGViYXIudmFsdWUgPSB0cnVlOwogICAgICB9KTsKICAgIH07IC8vIEFjdGl2ZSBDaGF0IENvbnRhY3QgRGV0YWlscwoKCiAgICB2YXIgc2hhbGxTaG93QWN0aXZlQ2hhdENvbnRhY3RTaWRlYmFyID0gcmVmKGZhbHNlKTsgLy8gVUkgKyBTTSBEZXZpY2VzCiAgICAvLyBMZWZ0IFNpZGViYXIgUmVzcG9uc2l2ZW5lc3MKCiAgICB2YXIgX3VzZVJlc3BvbnNpdmVBcHBMZWZ0ID0gdXNlUmVzcG9uc2l2ZUFwcExlZnRTaWRlYmFyVmlzaWJpbGl0eSgpLAogICAgICAgIG1xU2hhbGxTaG93TGVmdFNpZGViYXIgPSBfdXNlUmVzcG9uc2l2ZUFwcExlZnQubXFTaGFsbFNob3dMZWZ0U2lkZWJhcjsKCiAgICB2YXIgc3RhcnRDb252ZXJzYXRpb24gPSBmdW5jdGlvbiBzdGFydENvbnZlcnNhdGlvbigpIHsKICAgICAgaWYgKHN0b3JlLnN0YXRlLmFwcC53aW5kb3dXaWR0aCA8ICR0aGVtZUJyZWFrcG9pbnRzLmxnKSB7CiAgICAgICAgbXFTaGFsbFNob3dMZWZ0U2lkZWJhci52YWx1ZSA9IHRydWU7CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgLy8gRmlsdGVycwogICAgICAvLyBmb3JtYXREYXRlLAogICAgICAvLyB1c2VDaGF0CiAgICAgIHJlc29sdmVBdmF0YXJCYWRnZVZhcmlhbnQ6IHJlc29sdmVBdmF0YXJCYWRnZVZhcmlhbnQsCiAgICAgIC8vIENoYXQgJiBDb250YWN0cwogICAgICBjaGF0c0NvbnRhY3RzOiBjaGF0c0NvbnRhY3RzLAogICAgICBjb250YWN0czogY29udGFjdHMsCiAgICAgIC8vIFNpbmdsZSBDaGF0CiAgICAgIHJlZkNoYXRMb2dQUzogcmVmQ2hhdExvZ1BTLAogICAgICBhY3RpdmVDaGF0OiBhY3RpdmVDaGF0LAogICAgICBjaGF0SW5wdXRNZXNzYWdlOiBjaGF0SW5wdXRNZXNzYWdlLAogICAgICBvcGVuQ2hhdE9mQ29udGFjdDogb3BlbkNoYXRPZkNvbnRhY3QsCiAgICAgIHNlbmRNZXNzYWdlOiBzZW5kTWVzc2FnZSwKICAgICAgLy8gUHJvZmlsZSBVc2VyIE1pbmltYWwgRGF0YQogICAgICBwcm9maWxlVXNlckRhdGFNaW5pbWFsOiBwcm9maWxlVXNlckRhdGFNaW5pbWFsLAogICAgICAvLyBVc2VyIFByb2ZpbGUgU2lkZWJhcgogICAgICBwcm9maWxlVXNlckRhdGE6IHByb2ZpbGVVc2VyRGF0YSwKICAgICAgc2hhbGxTaG93VXNlclByb2ZpbGVTaWRlYmFyOiBzaGFsbFNob3dVc2VyUHJvZmlsZVNpZGViYXIsCiAgICAgIHNob3dVc2VyUHJvZmlsZVNpZGViYXI6IHNob3dVc2VyUHJvZmlsZVNpZGViYXIsCiAgICAgIC8vIEFjdGl2ZSBDaGF0IENvbnRhY3QgRGV0YWlscwogICAgICBzaGFsbFNob3dBY3RpdmVDaGF0Q29udGFjdFNpZGViYXI6IHNoYWxsU2hvd0FjdGl2ZUNoYXRDb250YWN0U2lkZWJhciwKICAgICAgLy8gVUkKICAgICAgcGVyZmVjdFNjcm9sbGJhclNldHRpbmdzOiBwZXJmZWN0U2Nyb2xsYmFyU2V0dGluZ3MsCiAgICAgIC8vIFVJICsgU00gRGV2aWNlcwogICAgICBzdGFydENvbnZlcnNhdGlvbjogc3RhcnRDb252ZXJzYXRpb24sCiAgICAgIG1xU2hhbGxTaG93TGVmdFNpZGViYXI6IG1xU2hhbGxTaG93TGVmdFNpZGViYXIKICAgIH07CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+KA;AACA,SACAA,GADA,EACAC,WADA,EACAC,QADA,QAEA,sBAFA;AAGA,SACAC,OADA,EACAC,SADA,EACAC,aADA,EACAC,KADA,EACAC,WADA,EACAC,UADA,EACAC,OADA,QAEA,eAFA;AAGA,wD,CACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACAC;AAEA;AACAP,oBAHA;AAIAC,wBAJA;AAKAC,gCALA;AAMAC,gBANA;AAOAC,4BAPA;AAQAC,0BARA;AASAC,oBATA;AAWA;AACAE,4CAZA;AAcA;AACAC,oCAfA;AAgBAC,8EAhBA;AAiBAC;AAjBA,GADA;AAoBAC,OApBA,mBAoBA;AACA,gDADA,CAGA;;AACA,wHAJA,CAMA;;AACAd;AACA;AACA,KAFA;;AAIA;AAAA,uEAXA,CAaA;;;AACA;;AACA;AACA;AACAe;AACA,KAHA,CAfA,CAoBA;AACA;AACA;;;AACA;AACA;;AAEA;AACAC,uDACAC,IADA,CACA;AACAC;AACAC,gDAFA,CAGA;;AACAC;AACA,OANA;AAOA,KARA;;AAUAC,2BApCA,CAsCA;AACA;AACA;;AACA;AACA;;AACA;AACA;AACAC;AAEAN;AAAAO;AAAA,SACAN,IADA,CACA;AACAO,yCADA,CAGA;;AACA;AAAA;AAAA;AACA,iDALA,CAOA;;AACAvB;AAAAwB;AAAA;AACA,OAVA,EAJA,CAgBA;AACA;;AACAC;AACA,KAnBA;;AAoBA;AACA;AACA;AACAC,8CADA;AAEA;AACAC,iDAHA;AAIAC;AAJA;AAMAb,sDACAC,IADA,CACA;AACA;AAAA;AAAA,uCADA,CAGA;;AACA;AACAO;AAAAM;AAAAC;AAAA;AACAb,mEACAM,wBADA;AAEAM;AACAE,yBADA;AAEAC,yCAFA;AAGAC;AAHA;AAFA;AAQA,SAVA,MAUA;AACA;AACAV;AACA,SAjBA,CAmBA;;;AACAF,oCApBA,CAsBA;;AACA;AAAA;AAAA;AACAS,kDAxBA,CA0BA;;AACA9B;AAAAwB;AAAA;AACA,OA7BA;AA8BA,KAtCA;;AAwCA;AACAU;AADA,MAvGA,CA2GA;AACA;;AACA,kCA7GA,CA8GA;;AACA;AAEA;;AACA;AACAnB,gDACAC,IADA,CACA;AACAmB;AACAC;AACA,OAJA;AAKA,KANA,CAlHA,CA0HA;;;AACA,uDA3HA,CA6HA;AACA;;AACA;AAAA;;AACA;AACA;AACAX;AACA;AACA,KAJA;;AAMA;AACA;AACA;AAEA;AACAY,0DALA;AAOA;AACApB,kCARA;AASAC,wBATA;AAWA;AACAoB,gCAZA;AAaAf,4BAbA;AAcAF,wCAdA;AAeAkB,0CAfA;AAgBAC,8BAhBA;AAkBA;AACArB,oDAnBA;AAqBA;AACAgB,sCAtBA;AAuBAC,8DAvBA;AAwBAK,oDAxBA;AA0BA;AACAC,0EA3BA;AA6BA;AACAC,wDA9BA;AAgCA;AACAC,0CAjCA;AAkCAnB;AAlCA;AAoCA;AA9LA","names":["ref","onUnmounted","nextTick","BAvatar","BDropdown","BDropdownItem","BForm","BInputGroup","BFormInput","BButton","components","VuePerfectScrollbar","ChatLeftSidebar","ChatActiveChatContentDetailsSidedbar","ChatLog","setup","scrollEl","store","then","chatsContacts","contacts","profileUserDataMinimal","fetchChatAndContacts","chatInputMessage","userId","activeChat","scrollToBottomInChatLog","mqShallShowLeftSidebar","contactId","senderId","message","chat","contact","id","lastMessage","unseenMsgs","maxScrollbarLength","profileUserData","shallShowUserProfileSidebar","resolveAvatarBadgeVariant","refChatLogPS","openChatOfContact","sendMessage","showUserProfileSidebar","shallShowActiveChatContactSidebar","perfectScrollbarSettings","startConversation"],"sourceRoot":"src/views/apps/chat","sources":["Chat.vue"],"sourcesContent":["<template>\n  <!-- Need to add height inherit because Vue 2 don't support multiple root ele -->\n  <div style=\"height: inherit\">\n    <div\n      class=\"body-content-overlay\"\n      :class=\"{'show': shallShowUserProfileSidebar || shallShowActiveChatContactSidebar || mqShallShowLeftSidebar}\"\n      @click=\"mqShallShowLeftSidebar=shallShowActiveChatContactSidebar=shallShowUserProfileSidebar=false\"\n    />\n\n    <!-- Main Area -->\n    <section class=\"chat-app-window\">\n\n      <!-- Start Chat Logo -->\n      <div\n        v-if=\"!activeChat.contact\"\n        class=\"start-chat-area\"\n      >\n        <div class=\"mb-1 start-chat-icon\">\n          <feather-icon\n            icon=\"MessageSquareIcon\"\n            size=\"56\"\n          />\n        </div>\n        <h4\n          class=\"sidebar-toggle start-chat-text\"\n          @click=\"startConversation\"\n        >\n          Start Conversation\n        </h4>\n      </div>\n\n      <!-- Chat Content -->\n      <div\n        v-else\n        class=\"active-chat\"\n      >\n        <!-- Chat Navbar -->\n        <div class=\"chat-navbar\">\n          <header class=\"chat-header\">\n\n            <!-- Avatar & Name -->\n            <div class=\"d-flex align-items-center\">\n\n              <!-- Toggle Icon -->\n              <div class=\"sidebar-toggle d-block d-lg-none mr-1\">\n                <feather-icon\n                  icon=\"MenuIcon\"\n                  class=\"cursor-pointer\"\n                  size=\"21\"\n                  @click=\"mqShallShowLeftSidebar = true\"\n                />\n              </div>\n\n              <b-avatar\n                size=\"36\"\n                :src=\"activeChat.contact.avatar\"\n                class=\"mr-1 cursor-pointer badge-minimal\"\n                badge\n                :badge-variant=\"resolveAvatarBadgeVariant(activeChat.contact.status)\"\n                @click.native=\"shallShowActiveChatContactSidebar=true\"\n              />\n              <h6 class=\"mb-0\">\n                {{ activeChat.contact.fullName }}\n              </h6>\n            </div>\n\n            <!-- Contact Actions -->\n            <div class=\"d-flex align-items-center\">\n              <feather-icon\n                icon=\"PhoneCallIcon\"\n                size=\"17\"\n                class=\"cursor-pointer d-sm-block d-none mr-1\"\n              />\n              <feather-icon\n                icon=\"VideoIcon\"\n                size=\"17\"\n                class=\"cursor-pointer d-sm-block d-none mr-1\"\n              />\n              <feather-icon\n                icon=\"SearchIcon\"\n                size=\"17\"\n                class=\"cursor-pointer d-sm-block d-none mr-50\"\n              />\n              <div class=\"dropdown\">\n                <b-dropdown\n                  variant=\"link\"\n                  no-caret\n                  toggle-class=\"p-0\"\n                  right\n                >\n                  <template #button-content>\n                    <feather-icon\n                      icon=\"MoreVerticalIcon\"\n                      size=\"17\"\n                      class=\"align-middle text-body\"\n                    />\n                  </template>\n                  <b-dropdown-item>\n                    View Contact\n                  </b-dropdown-item>\n                  <b-dropdown-item>\n                    Mute Notifications\n                  </b-dropdown-item>\n                  <b-dropdown-item>\n                    Block Contact\n                  </b-dropdown-item>\n                  <b-dropdown-item>\n                    Clear Chat\n                  </b-dropdown-item>\n                  <b-dropdown-item>\n                    Report\n                  </b-dropdown-item>\n                </b-dropdown>\n              </div>\n            </div>\n          </header>\n        </div>\n\n        <!-- User Chat Area -->\n        <vue-perfect-scrollbar\n          ref=\"refChatLogPS\"\n          :settings=\"perfectScrollbarSettings\"\n          class=\"user-chats scroll-area\"\n        >\n          <chat-log\n            :chat-data=\"activeChat\"\n            :profile-user-avatar=\"profileUserDataMinimal.avatar\"\n          />\n        </vue-perfect-scrollbar>\n\n        <!-- Message Input -->\n        <b-form\n          class=\"chat-app-form\"\n          @submit.prevent=\"sendMessage\"\n        >\n          <b-input-group class=\"input-group-merge form-send-message mr-1\">\n            <b-form-input\n              v-model=\"chatInputMessage\"\n              placeholder=\"Enter your message\"\n            />\n          </b-input-group>\n          <b-button\n            variant=\"primary\"\n            type=\"submit\"\n          >\n            Send\n          </b-button>\n        </b-form>\n      </div>\n    </section>\n\n    <!-- Active Chat Contact Details Sidebar -->\n    <chat-active-chat-content-details-sidedbar\n      :shall-show-active-chat-contact-sidebar.sync=\"shallShowActiveChatContactSidebar\"\n      :contact=\"activeChat.contact || {}\"\n    />\n\n    <!-- Sidebar -->\n    <portal to=\"content-renderer-sidebar-left\">\n      <chat-left-sidebar\n        :chats-contacts=\"chatsContacts\"\n        :contacts=\"contacts\"\n        :active-chat-contact-id=\"activeChat.contact ? activeChat.contact.id : null\"\n        :shall-show-user-profile-sidebar.sync=\"shallShowUserProfileSidebar\"\n        :profile-user-data=\"profileUserData\"\n        :profile-user-minimal-data=\"profileUserDataMinimal\"\n        :mq-shall-show-left-sidebar.sync=\"mqShallShowLeftSidebar\"\n        @show-user-profile=\"showUserProfileSidebar\"\n        @open-chat=\"openChatOfContact\"\n      />\n    </portal>\n  </div>\n</template>\n\n<script>\nimport store from '@/store'\nimport {\n  ref, onUnmounted, nextTick,\n} from '@vue/composition-api'\nimport {\n  BAvatar, BDropdown, BDropdownItem, BForm, BInputGroup, BFormInput, BButton,\n} from 'bootstrap-vue'\nimport VuePerfectScrollbar from 'vue-perfect-scrollbar'\n// import { formatDate } from '@core/utils/filter'\nimport { $themeBreakpoints } from '@themeConfig'\nimport { useResponsiveAppLeftSidebarVisibility } from '@core/comp-functions/ui/app'\nimport ChatLeftSidebar from './ChatLeftSidebar.vue'\nimport chatStoreModule from './chatStoreModule'\nimport ChatActiveChatContentDetailsSidedbar from './ChatActiveChatContentDetailsSidedbar.vue'\nimport ChatLog from './ChatLog.vue'\nimport useChat from './useChat'\n\nexport default {\n  components: {\n\n    // BSV\n    BAvatar,\n    BDropdown,\n    BDropdownItem,\n    BForm,\n    BInputGroup,\n    BFormInput,\n    BButton,\n\n    // 3rd Party\n    VuePerfectScrollbar,\n\n    // SFC\n    ChatLeftSidebar,\n    ChatActiveChatContentDetailsSidedbar,\n    ChatLog,\n  },\n  setup() {\n    const CHAT_APP_STORE_MODULE_NAME = 'app-chat'\n\n    // Register module\n    if (!store.hasModule(CHAT_APP_STORE_MODULE_NAME)) store.registerModule(CHAT_APP_STORE_MODULE_NAME, chatStoreModule)\n\n    // UnRegister on leave\n    onUnmounted(() => {\n      if (store.hasModule(CHAT_APP_STORE_MODULE_NAME)) store.unregisterModule(CHAT_APP_STORE_MODULE_NAME)\n    })\n\n    const { resolveAvatarBadgeVariant } = useChat()\n\n    // Scroll to Bottom ChatLog\n    const refChatLogPS = ref(null)\n    const scrollToBottomInChatLog = () => {\n      const scrollEl = refChatLogPS.value.$el || refChatLogPS.value\n      scrollEl.scrollTop = scrollEl.scrollHeight\n    }\n\n    // ------------------------------------------------\n    // Chats & Contacts\n    // ------------------------------------------------\n    const chatsContacts = ref([])\n    const contacts = ref([])\n\n    const fetchChatAndContacts = () => {\n      store.dispatch('app-chat/fetchChatsAndContacts')\n        .then(response => {\n          chatsContacts.value = response.data.chatsContacts\n          contacts.value = response.data.contacts\n          // eslint-disable-next-line no-use-before-define\n          profileUserDataMinimal.value = response.data.profileUser\n        })\n    }\n\n    fetchChatAndContacts()\n\n    // ------------------------------------------------\n    // Single Chat\n    // ------------------------------------------------\n    const activeChat = ref({})\n    const chatInputMessage = ref('')\n    const openChatOfContact = userId => {\n      // Reset send message input value\n      chatInputMessage.value = ''\n\n      store.dispatch('app-chat/getChat', { userId })\n        .then(response => {\n          activeChat.value = response.data\n\n          // Set unseenMsgs to 0\n          const contact = chatsContacts.value.find(c => c.id === userId)\n          if (contact) contact.chat.unseenMsgs = 0\n\n          // Scroll to bottom\n          nextTick(() => { scrollToBottomInChatLog() })\n        })\n\n      // if SM device =>  Close Chat & Contacts left sidebar\n      // eslint-disable-next-line no-use-before-define\n      mqShallShowLeftSidebar.value = false\n    }\n    const sendMessage = () => {\n      if (!chatInputMessage.value) return\n      const payload = {\n        contactId: activeChat.value.contact.id,\n        // eslint-disable-next-line no-use-before-define\n        senderId: profileUserDataMinimal.value.id,\n        message: chatInputMessage.value,\n      }\n      store.dispatch('app-chat/sendMessage', payload)\n        .then(response => {\n          const { newMessageData, chat } = response.data\n\n          // ? If it's not undefined => New chat is created (Contact is not in list of chats)\n          if (chat !== undefined) {\n            activeChat.value = { chat, contact: activeChat.value.contact }\n            chatsContacts.value.push({\n              ...activeChat.value.contact,\n              chat: {\n                id: chat.id,\n                lastMessage: newMessageData,\n                unseenMsgs: 0,\n              },\n            })\n          } else {\n            // Add message to log\n            activeChat.value.chat.chat.push(newMessageData)\n          }\n\n          // Reset send message input value\n          chatInputMessage.value = ''\n\n          // Set Last Message for active contact\n          const contact = chatsContacts.value.find(c => c.id === activeChat.value.contact.id)\n          contact.chat.lastMessage = newMessageData\n\n          // Scroll to bottom\n          nextTick(() => { scrollToBottomInChatLog() })\n        })\n    }\n\n    const perfectScrollbarSettings = {\n      maxScrollbarLength: 150,\n    }\n\n    // User Profile Sidebar\n    // ? Will contain all details of profile user (e.g. settings, about etc.)\n    const profileUserData = ref({})\n    // ? Will contain id, name and avatar & status\n    const profileUserDataMinimal = ref({})\n\n    const shallShowUserProfileSidebar = ref(false)\n    const showUserProfileSidebar = () => {\n      store.dispatch('app-chat/getProfileUser')\n        .then(response => {\n          profileUserData.value = response.data\n          shallShowUserProfileSidebar.value = true\n        })\n    }\n\n    // Active Chat Contact Details\n    const shallShowActiveChatContactSidebar = ref(false)\n\n    // UI + SM Devices\n    // Left Sidebar Responsiveness\n    const { mqShallShowLeftSidebar } = useResponsiveAppLeftSidebarVisibility()\n    const startConversation = () => {\n      if (store.state.app.windowWidth < $themeBreakpoints.lg) {\n        mqShallShowLeftSidebar.value = true\n      }\n    }\n\n    return {\n      // Filters\n      // formatDate,\n\n      // useChat\n      resolveAvatarBadgeVariant,\n\n      // Chat & Contacts\n      chatsContacts,\n      contacts,\n\n      // Single Chat\n      refChatLogPS,\n      activeChat,\n      chatInputMessage,\n      openChatOfContact,\n      sendMessage,\n\n      // Profile User Minimal Data\n      profileUserDataMinimal,\n\n      // User Profile Sidebar\n      profileUserData,\n      shallShowUserProfileSidebar,\n      showUserProfileSidebar,\n\n      // Active Chat Contact Details\n      shallShowActiveChatContactSidebar,\n\n      // UI\n      perfectScrollbarSettings,\n\n      // UI + SM Devices\n      startConversation,\n      mqShallShowLeftSidebar,\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>\n\n<style lang=\"scss\">\n@import \"~@core/scss/base/pages/app-chat.scss\";\n@import \"~@core/scss/base/pages/app-chat-list.scss\";\n</style>\n"]}]}