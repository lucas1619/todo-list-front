{"remainingRequest":"/home/lucas/Desktop/test/node_modules/babel-loader/lib/index.js!/home/lucas/Desktop/test/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/lucas/Desktop/test/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/lucas/Desktop/test/src/views/apps/chat/ChatLog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/lucas/Desktop/test/src/views/apps/chat/ChatLog.vue","mtime":1611055082000},{"path":"/home/lucas/Desktop/test/babel.config.js","mtime":1611055082000},{"path":"/home/lucas/Desktop/test/node_modules/cache-loader/dist/cjs.js","mtime":1646760974730},{"path":"/home/lucas/Desktop/test/node_modules/babel-loader/lib/index.js","mtime":1646760975446},{"path":"/home/lucas/Desktop/test/node_modules/cache-loader/dist/cjs.js","mtime":1646760974730},{"path":"/home/lucas/Desktop/test/node_modules/vue-loader/lib/index.js","mtime":1646760975666}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGNvbXB1dGVkIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknOwppbXBvcnQgeyBCQXZhdGFyIH0gZnJvbSAnYm9vdHN0cmFwLXZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBCQXZhdGFyOiBCQXZhdGFyCiAgfSwKICBwcm9wczogewogICAgY2hhdERhdGE6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHByb2ZpbGVVc2VyQXZhdGFyOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChwcm9wcykgewogICAgdmFyIGZvcm1hdHRlZENoYXREYXRhID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICB2YXIgY29udGFjdCA9IHsKICAgICAgICBpZDogcHJvcHMuY2hhdERhdGEuY29udGFjdC5pZCwKICAgICAgICBhdmF0YXI6IHByb3BzLmNoYXREYXRhLmNvbnRhY3QuYXZhdGFyCiAgICAgIH07CiAgICAgIHZhciBjaGF0TG9nID0gW107CgogICAgICBpZiAocHJvcHMuY2hhdERhdGEuY2hhdCkgewogICAgICAgIGNoYXRMb2cgPSBwcm9wcy5jaGF0RGF0YS5jaGF0LmNoYXQ7CiAgICAgIH0KCiAgICAgIHZhciBmb3JtYXR0ZWRDaGF0TG9nID0gW107CiAgICAgIHZhciBjaGF0TWVzc2FnZVNlbmRlcklkID0gY2hhdExvZ1swXSA/IGNoYXRMb2dbMF0uc2VuZGVySWQgOiB1bmRlZmluZWQ7CiAgICAgIHZhciBtc2dHcm91cCA9IHsKICAgICAgICBzZW5kZXI6IGNoYXRNZXNzYWdlU2VuZGVySWQsCiAgICAgICAgbWVzc2FnZXM6IFtdCiAgICAgIH07CiAgICAgIGNoYXRMb2cuZm9yRWFjaChmdW5jdGlvbiAobXNnLCBpbmRleCkgewogICAgICAgIGlmIChjaGF0TWVzc2FnZVNlbmRlcklkID09PSBtc2cuc2VuZGVySWQpIHsKICAgICAgICAgIG1zZ0dyb3VwLm1lc3NhZ2VzLnB1c2goewogICAgICAgICAgICBtc2c6IG1zZy5tZXNzYWdlLAogICAgICAgICAgICB0aW1lOiBtc2cudGltZQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNoYXRNZXNzYWdlU2VuZGVySWQgPSBtc2cuc2VuZGVySWQ7CiAgICAgICAgICBmb3JtYXR0ZWRDaGF0TG9nLnB1c2gobXNnR3JvdXApOwogICAgICAgICAgbXNnR3JvdXAgPSB7CiAgICAgICAgICAgIHNlbmRlcklkOiBtc2cuc2VuZGVySWQsCiAgICAgICAgICAgIG1lc3NhZ2VzOiBbewogICAgICAgICAgICAgIG1zZzogbXNnLm1lc3NhZ2UsCiAgICAgICAgICAgICAgdGltZTogbXNnLnRpbWUKICAgICAgICAgICAgfV0KICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBpZiAoaW5kZXggPT09IGNoYXRMb2cubGVuZ3RoIC0gMSkgZm9ybWF0dGVkQ2hhdExvZy5wdXNoKG1zZ0dyb3VwKTsKICAgICAgfSk7CiAgICAgIHJldHVybiB7CiAgICAgICAgZm9ybWF0dGVkQ2hhdExvZzogZm9ybWF0dGVkQ2hhdExvZywKICAgICAgICBjb250YWN0OiBjb250YWN0LAogICAgICAgIHByb2ZpbGVVc2VyQXZhdGFyOiBwcm9wcy5wcm9maWxlVXNlckF2YXRhcgogICAgICB9OwogICAgfSk7CiAgICByZXR1cm4gewogICAgICBmb3JtYXR0ZWRDaGF0RGF0YTogZm9ybWF0dGVkQ2hhdERhdGEKICAgIH07CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AAEA;AACAA;AACAC;AADA,GADA;AAIAC;AACAC;AACAC,kBADA;AAEAC;AAFA,KADA;AAKAC;AACAF,kBADA;AAEAC;AAFA;AALA,GAJA;AAcAE,OAdA,iBAcAL,KAdA,EAcA;AACA;AACA;AACAM,qCADA;AAEAC;AAFA;AAKA;;AACA;AACAC;AACA;;AAEA;AACA;AACA;AACAC,mCADA;AAEAC;AAFA;AAKAF;AACA;AACAG;AACAC,4BADA;AAEAC;AAFA;AAIA,SALA,MAKA;AACAC;AACAC;AACAJ;AACAK,kCADA;AAEAN;AACAE,8BADA;AAEAC;AAFA;AAFA;AAOA;;AACA;AACA,OAlBA;AAoBA;AACAE,0CADA;AAEAE,wBAFA;AAGAb;AAHA;AAKA,KA3CA;AA6CA;AACAc;AADA;AAGA;AA/DA","names":["components","BAvatar","props","chatData","type","required","profileUserAvatar","setup","id","avatar","chatLog","sender","messages","msgGroup","msg","time","chatMessageSenderId","formattedChatLog","senderId","contact","formattedChatData"],"sourceRoot":"src/views/apps/chat","sources":["ChatLog.vue"],"sourcesContent":["<template>\n  <div class=\"chats\">\n    <div\n      v-for=\"(msgGrp, index) in formattedChatData.formattedChatLog\"\n      :key=\"msgGrp.senderId+String(index)\"\n      class=\"chat\"\n      :class=\"{'chat-left': msgGrp.senderId === formattedChatData.contact.id}\"\n    >\n      <div class=\"chat-avatar\">\n        <b-avatar\n          size=\"36\"\n          class=\"avatar-border-2 box-shadow-1\"\n          variant=\"transparent\"\n          :src=\"msgGrp.senderId === formattedChatData.contact.id ? formattedChatData.contact.avatar : profileUserAvatar\"\n        />\n      </div>\n      <div class=\"chat-body\">\n        <div\n          v-for=\"msgData in msgGrp.messages\"\n          :key=\"msgData.time\"\n          class=\"chat-content\"\n        >\n          <p>{{ msgData.msg }}</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed } from '@vue/composition-api'\nimport { BAvatar } from 'bootstrap-vue'\n\nexport default {\n  components: {\n    BAvatar,\n  },\n  props: {\n    chatData: {\n      type: Object,\n      required: true,\n    },\n    profileUserAvatar: {\n      type: String,\n      required: true,\n    },\n  },\n  setup(props) {\n    const formattedChatData = computed(() => {\n      const contact = {\n        id: props.chatData.contact.id,\n        avatar: props.chatData.contact.avatar,\n      }\n\n      let chatLog = []\n      if (props.chatData.chat) {\n        chatLog = props.chatData.chat.chat\n      }\n\n      const formattedChatLog = []\n      let chatMessageSenderId = chatLog[0] ? chatLog[0].senderId : undefined\n      let msgGroup = {\n        sender: chatMessageSenderId,\n        messages: [],\n      }\n\n      chatLog.forEach((msg, index) => {\n        if (chatMessageSenderId === msg.senderId) {\n          msgGroup.messages.push({\n            msg: msg.message,\n            time: msg.time,\n          })\n        } else {\n          chatMessageSenderId = msg.senderId\n          formattedChatLog.push(msgGroup)\n          msgGroup = {\n            senderId: msg.senderId,\n            messages: [{\n              msg: msg.message,\n              time: msg.time,\n            }],\n          }\n        }\n        if (index === chatLog.length - 1) formattedChatLog.push(msgGroup)\n      })\n\n      return {\n        formattedChatLog,\n        contact,\n        profileUserAvatar: props.profileUserAvatar,\n      }\n    })\n\n    return {\n      formattedChatData,\n    }\n  },\n}\n</script>\n\n<style>\n\n</style>\n"]}]}